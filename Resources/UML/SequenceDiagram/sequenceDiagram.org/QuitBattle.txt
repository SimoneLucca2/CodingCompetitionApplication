participant "Client" as C
participant "APIGateway" as APIG
participant "BattleService" as BS
participant "BattleDataTier" as BDT
participant "Messasge Broker" as MB

C->APIG: DELETE\n/v1/battle/\n{battleID}/\nstudent/\n{studentID}
activate APIG
APIG->BS:DELETE\n/battle/\n{battleID}/\nstudent/\n{studentID}
activate BS
BS->BDT: GET /battle/{battleID}
activate BDT
BS<--BDT: 200 OK (json file)
deactivate BDT
alt If battle in "battle" state
BS->BDT: POST /battle/{battleID}/\nscore/{studentID}
activate BDT
BDT->BDT: Student's score set\nto 0 (zero)
BS<--BDT: 200 OK
deactivate BDT
BS->MB: Publish battle.score
else If battle in "pre-battle" state
BS->BDT: DELETE\n/battle/\n{battleID}/\nstudent/\n{studentID}
activate BDT
BDT->BDT: Delete every information correlated\nwith the student in the specified battle
BS<--BDT: 200 OK
deactivate BDT
BS->MB:Publish battle.student.quit
end
APIG<--BS: 200 OK
deactivate BS
C<--APIG: 200 OK
deactivate APIG



